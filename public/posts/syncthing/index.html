<!DOCTYPE html>
<html lang="en-us">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Alexander Stephan</title>
	
	<meta name="author" content="Alexander Stephan">
	<link rel="stylesheet" href="/css/style.css">
	
	
</head>
<body>
	<header>
	<a id="logo" href="https://alexanderstephan.xyz/">Hi, I&#39;m Alex</a>
		<div id="social-entries-alt">

		
		
		
		

		
		

		
		

		
		
		<a href="https://github.com/alexanderstephan" target="_blank" rel="noopener" class="share-btn github">
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 496 512">
    <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/>
</svg>

		</a>
		

		
		
		<a href="https://www.flickr.com/photos/155232150@N04" target="_blank" rel="noopener" class="share-btn flickr">
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 512 512">
    <path d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"/>
</svg>

		</a>
		

		
		
		<a href="https://www.mixcloud.com/alexander_stephan/" target="_blank" rel="noopener"
			class="share-btn mixcloud">
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 496 512">
    <path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zM88 256H56c0-105.9 86.1-192 192-192v32c-88.2 0-160 71.8-160 160zm160 96c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96zm0-128c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"/>
</svg>

		</a>
		
		</div>
	<nav>
		<div id="links">
		
		<a id="entry" href="/"><b>Home</b></a>
		
		<a id="entry" href="/about/"><b>About</b></a>
		 
		</div>

		<div id="social-entries">

		
		
		
		

		
		

		
		

		
		
		<a href="https://github.com/alexanderstephan" target="_blank" rel="noopener" class="share-btn github">
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 496 512">
    <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/>
</svg>

		</a>
		

		
		
		<a href="https://www.flickr.com/photos/155232150@N04" target="_blank" rel="noopener" class="share-btn flickr">
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 512 512">
    <path d="M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120 53.8 120 120 120 120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88 39.5-88 88-88 88 39.5 88 88z"/>
</svg>

		</a>
		

		
		
		<a href="https://www.mixcloud.com/alexander_stephan/" target="_blank" rel="noopener"
			class="share-btn mixcloud">
			<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 496 512">
    <path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zM88 256H56c0-105.9 86.1-192 192-192v32c-88.2 0-160 71.8-160 160zm160 96c-53 0-96-43-96-96s43-96 96-96 96 43 96 96-43 96-96 96zm0-128c-17.7 0-32 14.3-32 32s14.3 32 32 32 32-14.3 32-32-14.3-32-32-32z"/>
</svg>

		</a>
		
		</div>
	</nav>
</header>

	
	<main>
		<article>
			<h1 class="title">Installing Syncthing alongside Nextcloud</h1>
                        
			<b><time>09.03.2021 20:21</time></b>
                        
                        
			   <a href="/tags/cloud">&lt;cloud/></a>
        	       
			   <a href="/tags/server">&lt;server/></a>
        	       
			<div>
				<p>I&rsquo;ve been using a self-hosted solution for my Nextcloud for quite some time now. I always felt like the performance was not up to par, especially on my lower end devices. My MacBook almost reached 100% CPU usage just by using the synchronization tool from the official Nextcloud client. This does not usually appear to a problem, but in my particular scenario, I have to synchronize a lot of small files due to very fragmented project structures, which seem very demanding for the indexing algorithm.</p>
<p>In need for a more lightweight solution a friend of mine recommended to use <a href="https://syncthing.net/">Syncthing</a>. Instead of focusing on all the different aspects of a complete cloud solution, Syncthing just tries to do one thing, and seems to do it just right. For me it is a lot more usable as it allows me to sync individual folders in my home directory with ease. When using the Nextcloud client it is required to have all the files in one folder. Of course you can just create a lot of symlinks, but just syncing to the real folders in the home directory just makes way more sense to me.</p>
<p>Depending on the type of files you can add different versioning systems for each folder respectively. This way you can avoid unnecessary overhead. Furthermore it is also a very easy to install. One possible downside is that it only works locally. But keep in mind the Nextcloud can also keep track of all the files. Keep in mind that the Nextcoud still needs to keep a watchdog on the original folder structures. This only seems to work out of the box when using external storage, since the Nextcloud initiates a watchdog here by default. Hence I would  highly recommend the use of external storage here, but keep in mind there come many factors into play when considering an adequate solution here.</p>
<p>On <a href="https://www.raspbian.org/">Raspbian</a>, you can just run</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">sudo apt-get install syncthing
</code></pre></div><p>to install the latest version.</p>
<p>Now you need to locate the storage folder of your Nextcloud, which will also be become the root directory of all the folder we want to add to synchting. It is important here, that the user that executes syncthing also has to be the owner of the directory. Check by using <code>ls -l</code>. Use</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">chown -R user:user foldername
</code></pre></div><p>for all the folders you want to sync.</p>
<p>Now we want to enable the systemd service for syncthing. In case of Debian based distros the service files should be already installed, on other distros there might be additional steps required. Now we start it as a system service.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">systemctl enable syncthing@username.service
systemctl start syncthing@username.service
</code></pre></div><p>If everything was successful, you should see the service now using</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">systemctl status syncthing@username.service
</code></pre></div><p>As syncthing is now up and running we can setup syncthing now. By default the syncthing interface is only accessible via <code>localhost</code> on the host machine. This is easily fixed by following the recommendation from the <a href="https://docs.syncthing.net/users/faq.html#how-do-i-access-the-web-gui-from-another-computer">FAQ</a>.</p>
<p>Now you can install the Syncthing client on your other machines and replace the folders that are synchronized by the Nextcloud client. This may seem trivial to do, but for me it was the file sync solution I&rsquo;ve always wanted.</p>

			</div>
		</article>
	</main>
<aside>
	<div>
		<div>
			<h3>Latest Posts</h3>
		</div>
		<div>
			<ul>
				
				<li><a href="/posts/syncthing/">Installing Syncthing alongside Nextcloud</a></li>
				
				<li><a href="/posts/bilinear/">Algorithmic Mishaps</a></li>
				
				<li><a href="/posts/arch/">Getting started with Arch Linux</a></li>
				
				<li><a href="/posts/gh60/">Programming a GH60</a></li>
				
			</ul>
		</div>
	</div>
</aside>


	<footer>
	<div id="footer-info">
	&copy; 2021
	<a href="https://alexanderstephan.xyz/"><b>Alexander Stephan</b></a> - <i>alexander [dot] stephan [at] tum [dot] de </i>
	- <a href="http://alexanderstephan.xyz/key_pub.asc">[PGP]</a></i>
	</div>
</footer>

</body>
</html>
